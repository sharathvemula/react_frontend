{"version":3,"sources":["App.jsx","reportWebVitals.js","index.js"],"names":["users","Set","messages","message_token","date_format","timestamp","date","Date","toLocaleDateString","toLocaleTimeString","MessageList","props","state","msg","myRef","React","createRef","this","current","scrollIntoView","behavior","setState","id","Array","from","map","item","ref","Component","UserList","cur_users","sort","LoginForm1","url","username","password","display","streamToken","handleChange","bind","handleSubmit","changedis","startStream","event","target","name","value","that","console","log","messageToken","stream","EventSource","sessionStorage","getItem","addEventListener","_event","handle_connect","close","parentcall","thirdcall","handle_disconnect","data","JSON","parse","user","add","push","secondcall","message","delete","status","readyState","request","XMLHttpRequest","form1","FormData","append","setItem","open","onreadystatechange","responseText","stream_token","alert","send","preventDefault","onSubmit","class","type","onChange","Compose","child1","child2","update_usersnlists","updatemsg","nullmsg","connect","disconnect","update_users","update_msg","null_msg","request1","form","setRequestHeader","getResponseHeader","size","LoginForm","handleCallback","child","messageupdate","messagenull","handleconnect","handledisconnect","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.11551fde.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport './index.css';\nimport ReactDOM from 'react-dom';\nvar users = new Set()\nvar messages =  []\nvar message_token = \"\"\nvar childData;\n\nfunction date_format(timestamp) {\n    var date = new Date(timestamp * 1000);\n    return date.toLocaleDateString(\"en-US\") + \" \" + date.toLocaleTimeString(\"en-US\");\n}\n\nclass MessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {msg: []};\n    this.myRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.myRef.current.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  componentDidUpdate() {\n    this.myRef.current.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  update_msg(){\n    this.setState({msg: messages})\n\n  }\n\n  null_msg(){\n    this.setState({msg: []});\n  }\n\n  render() {\n    return(\n      <div id=\"chat\">\n        <div >\n          {\n            this.state.msg && Array.from(this.state.msg).map((item) =>\n            <div>{item}</div>\n          )}\n        </div>\n        <div ref = {this.myRef}> </div>\n    </div>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {cur_users: new Set()};\n  }\n\n  update_users(){\n    this.setState({cur_users: users});\n  }\n\n  render() {\n    return(\n      <div id=\"user_window\">\n        <h2>Online</h2>\n          <ul>\n            {\n              Array.from(this.state.cur_users).sort().map((item) =>\n              <li id=\"users\">{item}</li>\n            )}\n          </ul>\n      </div>\n    );\n  }\n}\n\n\nclass LoginForm1 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {url: '', username: '', password: '', display: true, message_token: '', streamToken:''};\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.changedis = this.changedis.bind(this);\n    this.startStream = this.startStream.bind(this);\n    //this.function = this.function.bind(this);\n  }\n\n  handleChange(event) {\n    if(event.target.name === \"url\"){\n      this.setState({url: event.target.value});\n    }\n\n    if(event.target.name === \"username\"){\n      this.setState({username: event.target.value});\n    }\n\n    if(event.target.name === \"password\"){\n      this.setState({password: event.target.value});\n    }\n    \n  }\n\n  startStream(that) {\n    console.log(\"URL\" + that.state.url);\n    console.log(\"MSG Token\" + that.state.message_token);\n    console.log(\"STR token\" + that.state.streamToken);\n    var streamToken = that.state.streamToken\n    var messageToken = that.state.message_token\n    message_token = messageToken\n    const stream = new EventSource(\n        sessionStorage.getItem(\"url\") + \"/stream/\" + streamToken\n    );\n\n    stream.addEventListener(\n        \"open\",\n        function(_event) {\n          that.setState({display: false});\n          that.props.handle_connect()\n        }\n    );\n    stream.addEventListener(\n        \"Disconnect\",\n        function(_event) {\n            console.log(\"COMING HERE: 103\")\n            console.log (\"CLOSING STREAM: \" + streamToken)\n            stream.close();\n            users = new Set();\n            that.props.parentcall();\n            streamToken = null;\n            messageToken = null;\n            that.state.messageToken = null;\n            that.state.streamToken = null;\n            that.props.thirdcall();\n            messages = [];\n            console.log(\"Disconnect reached\");\n            that.setState({display: true});\n            that.setState({url: \"\"});\n            that.setState({username: \"\"});\n            that.setState({password: \"\"});\n            that.props.handle_disconnect();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"Join\",\n        function(event) {\n            var data = JSON.parse(event.data);\n            console.log(\"User: \"+ data.user)\n            users.add(data[\"user\"]);\n            that.props.parentcall();\n            messages.push(date_format(data[\"created\"]) + \" JOIN: \" + data.user);\n            that.props.secondcall();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"Message\",\n        function(event) {\n            var data = JSON.parse(event.data);\n            messages.push(date_format(data[\"created\"]) + \" (\" + data.user + \") \" + data.message);\n            that.props.secondcall();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"Part\",\n        function(event) {\n            var data = JSON.parse(event.data);\n            console.log(\"DELeting User: \"+ data.user)\n            users.delete(data.user);\n            that.props.parentcall();\n            messages.push(date_format(data[\"created\"]) + \" PART: \" + data.user);\n            that.props.secondcall();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"ServerStatus\",\n        function(event) {\n            console.log(\"Coming here ServerStatus line 147\")\n            var data = JSON.parse(event.data);\n            messages.push(date_format(data[\"created\"]) + \" STATUS: \" + data.status);\n            that.props.secondcall();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"Users\",\n        function(event) {\n            users = new Set(JSON.parse(event.data).users);\n            that.props.parentcall();\n        },\n        false\n    );\n    stream.addEventListener(\n        \"error\",\n        function(event) {\n            if (event.target.readyState == 2) {\n                that.state.messageToken = null;\n                that.state.streamToken = null;\n                console.log(\"Disconnect reached at error\")\n                that.setState({display: true});\n                that.setState({url: \"\"});\n                that.setState({username: \"\"});\n                that.setState({password: \"\"});\n                users = new Set();\n                that.props.parentcall();\n                that.props.handle_disconnect();\n            } else {\n                that.props.handle_disconnect();\n                console.log(\"Disconnected, retrying\");\n            }\n        },\n        false\n    );\n    \n  }\n\n  start(data) {\n    console.log(\"MSG token:\");\n    console.log(data[\"message_token\"]);\n    this.setState({display: false});\n  }\n\n  changedis(){\n    console.log(\"Sharath\");\n    this.setState({display: false});\n  }\n\n\n  handleSubmit(event) {\n    console.log(this.state.username);\n    const that = this;\n    var request = new XMLHttpRequest();\n    var form1 = new FormData();\n    form1.append(\"password\", this.state.password);\n    form1.append(\"username\", this.state.username);\n    sessionStorage.setItem(\"url\", this.state.url);\n    console.log(\"TEST\");\n    request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/login\");\n    //request.setRequestHeader('Access-Control-Allow-Origin', '*');\n    request.onreadystatechange = function() {\n      console.log(\"TEST1\");\n      if (request.readyState != 4) {\n        console.log(\"TEST3\");\n        return;\n      }\n      console.log(\"Ready State \" + this.readyState);\n      if (request.status === 201) {\n          console.log(\"TEST2\");\n          that.changedis();\n          that.state.password = \"\";\n          that.state.password  = \"\";\n          const data = JSON.parse(this.responseText);\n          that.state.message_token = data.message_token;\n          console.log(data.message_token);\n          that.state.streamToken = data.stream_token;\n          that.startStream(that);\n      } else if (request.status === 403) {\n          alert(\"Invalid username or password\");\n      } else if (request.status === 409) {\n          alert(that.state.username + \" is already logged in\");\n\n      } else {\n          alert(request.status + \" failure to /login\");\n      }\n    }\n    request.send(form1);\n\n    event.preventDefault();\n\n  }\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div id = \"login-modal\" class= {this.state.display ? \"login\" : \"hide\"}>\n          <div class = \"content\" >\n          <h2 > Login </h2>\n          <div>\n            <label>\n              URL:\n              <input name=\"url\" type=\"text\" value={this.state.url} onChange={this.handleChange} />\n            </label>\n          </div>\n\n          <div>\n            <label>\n              username:\n              <input name=\"username\" type=\"text\" value={this.state.username} onChange={this.handleChange} />\n            </label>\n          </div>\n\n\n          <div>\n            <label>\n              Password:\n              <input name=\"password\" type=\"password\" value={this.state.password} onChange={this.handleChange} />\n            </label>\n          </div>\n\n          <div>\n            <label>  \n              <input type=\"submit\" value=\"Submit\" />\n            </label>\n          </div>\n        </div>\n      </div>\n      </form>\n\n    );\n  }\n}\n\n\n\nclass Compose extends React.Component {\n  constructor(props) {\n    super(props);  \n    this.state = {message: '', display: false};\n    this.child1 = React.createRef();\n    this.child2 = React.createRef();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.update_usersnlists = this.update_usersnlists.bind(this)\n    this.updatemsg = this.updatemsg.bind(this)\n    this.nullmsg = this.nullmsg.bind(this)\n    this.connect = this.connect.bind(this)\n    this.disconnect = this.disconnect.bind(this)\n  }\n\n  connect(){\n    this.setState({display: true});\n  }\n\n  disconnect(){\n    this.setState({display: false});\n  }\n\n  update_usersnlists(){\n    this.child2.current && this.child2.current.update_users();\n  }\n\n  updatemsg() {\n    this.child1.current && this.child1.current.update_msg();\n  }\n\n  nullmsg() {\n    this.child1.current.null_msg();\n  }\n\n  handleChange(event) {\n    if(event.target.name === \"message-id\"){\n      this.setState({message: event.target.value});\n    }\n    \n  }\n\n  handleSubmit(event) {\n    console.log(this.state.message);\n    event.preventDefault();\n    if(this.state.message == \"\") {\n      event.preventDefault();\n      return;\n    }\n    var that = this;\n    var request1 = new XMLHttpRequest();\n    var form = new FormData();\n    form.append(\"message\", this.state.message);\n    request1.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n    request1.setRequestHeader(\n        \"Authorization\",\n        \"Bearer \" + message_token\n    );\n\n    request1.onreadystatechange = function(event) {\n        console.log(\"Entering here\");\n        if (request1.readyState == 4 && request1.status != 403 && message_token != null) {\n            message_token = request1.getResponseHeader(\"token\");\n            console.log(\"Message Token\" + message_token)\n        }\n    }\n    request1.send(form);\n    that.setState({message:\"\"});\n  }\n\n  render() {\n    return (\n      <section id=\"container\">\n      <h1 id=\"title\" class= {this.state.display ? \"connected\" : \"disconnected\"}>CS291 Chat</h1>\n        <div id = \"window\">\n          <MessageList ref={this.child1}/>\n          <UserList ref={this.child2}/>\n        </div>\n      <form onSubmit={this.handleSubmit}>\n       <div id=\"message\">\n        <label>\n          <input name=\"message-id\" size=\"175\" type=\"text\" value={this.state.message} onChange={this.handleChange} />\n        </label>\n       </div>\n\n       <div>\n        <label>  \n          <input type=\"submit\" value=\"Submit\" />\n        </label>\n       </div>\n      </form>\n      </section>\n    );\n  }\n}\n\n\n\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.child = React.createRef();\n    this.handleCallback = this.handleCallback.bind(this)\n    this.messageupdate = this.messageupdate.bind(this)\n    this.messagenull = this.messagenull.bind(this)\n    this.handleconnect = this.handleconnect.bind(this)\n    this.handledisconnect = this.handledisconnect.bind(this)\n  }\n\n  handleCallback = () => {\n    if(this.child.current) { \n      this.child.current.update_usersnlists();\n    }\n  }\n\n  messageupdate = () => {\n    this.child.current && this.child.current.updatemsg();\n  }\n\n  messagenull = () => {\n    this.child.current && this.child.current.nullmsg();\n  }\n\n  handleconnect = () => {\n    this.child.current && this.child.current.connect();\n  }\n\n  handledisconnect = () => {\n    this.child.current && this.child.current.disconnect();\n  }\n\n  render() {\n    return (\n      <div>\n        <section id = \"container\">\n            <Compose ref={this.child}/>\n        </section>\n        <div>\n          <LoginForm1 parentcall={this.handleCallback} secondcall={this.messageupdate} thirdcall={this.messagenull} handle_connect={this.handleconnect} handle_disconnect={this.handledisconnect}/>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default LoginForm;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport LoginForm from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <LoginForm />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}